<header class="bg-dark">
  <app-header></app-header>
</header>

<div class="container my-5">
  <h1 class="display-4">{{ production.title }}</h1>
  <div class="row pt-5">
    <div class="col-sm-12 col-md-10 col-lg-8 mx-auto">
      <form  [formGroup]="editProcutionForm" (ngSubmit)="onSaveProduction()">
        <div class="form-group">
          <input type="text" class="form-control" placeholder="Titre" formControlName="title">
        </div>
        <div class="form-group">
          <input type="text" class="form-control" placeholder="URL" formControlName="url">
        </div>

        <div class="input-group mb-3">
            <div class="input-group-prepend">
              <label class="input-group-text" for="categories">Cat√©gorie</label>
            </div>
            <select class="custom-select" formControlName="category" id="categories">
              <option *ngFor="let category of categories">{{category.title}}</option>
            </select>
          </div>

          <div class="input-group mb-0">
            <div class="input-group-prepend">
              <label class="input-group-text" for="technolgies">Technos</label>
            </div>
            <select class="custom-select" id="technolgies" formControlName="technologies" (change)="onAddTechnology()">
              <option *ngFor="let skill of allSkills">{{skill.title}}</option>
            </select>
          </div>

          <div class="row pt-2 pb-3">
            <div class="col-12 col-md-6 col-lg-3" *ngFor="let techno of technologiesAdded; let i = index">
              <div class="bg-light shadow py-2 px-3 my-2 d-flex">
                <p class="fs-15 my-auto">{{ techno }}</p>
                <i class="fas fa-times fs-15 text-danger ml-auto my-auto deleteTechnoAdded" (click)="onRemoveAddedTechno(i)"></i>
              </div>
            </div>
          </div>

          <div class="form-row mb-3">
            <div class="input-group col-10">
              <div class="custom-file">
                <input type="file" class="custom-file-input" (change)="detectFiles($event)" id="inputGroupFile02">
                <label class="custom-file-label" for="inputGroupFile02" aria-describedby="inputGroupFileAddon02">Ajouer une image</label>
              </div>
            </div>
            <div class="col-2 d-flex">
              <div class="spinner-border text-info m-auto" role="status" *ngIf="fileIsUploading">
                <span class="sr-only">Loading...</span>
              </div>
            </div>
          </div>

          <div class="row pt-2 pb-3"  cdkDropList (cdkDropListDropped)="onDropPhoto($event)" [cdkDropListData]="photosAdded">
            <div class="col-4" *ngFor="let photo of photosAdded; let i = index" cdkDrag>
              <div class="bg-light shadow py-2 px-3 my-2 position-relative">
                <div>
                  <img [src]="photo" class="w-100" alt="">
                </div>
                <i class="fas fa-times fs-15 text-danger ml-auto my-auto deletePhotoAdded" (click)="onRemoveAddedPhoto(i)"></i>
              </div>
            </div>
          </div>

          <div class="form-group">
            <textarea placeholder="Description" id="productionDescription" formControlName="description" rows="4" class="form-control"></textarea>
          </div>

          <div class="d-flex">
            <button class="btn btn-outline-info mx-auto" type="submit">Enregistrer</button>
          </div>
      </form>
      <p class="text-success lead text-center" *ngIf="msg !== ''">{{ msg }}</p>
    </div>
  </div>
</div>
